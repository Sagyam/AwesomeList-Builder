/**
 * Mapping of programming languages and technologies to their Devicon classes
 * https://devicon.dev/
 */
export const TECH_ICON_MAP: Record<string, string> = {
    // Programming Languages
    javascript: "devicon-javascript-plain colored",
    typescript: "devicon-typescript-plain colored",
    python: "devicon-python-plain colored",
    java: "devicon-java-plain colored",
    csharp: "devicon-csharp-plain colored",
    "c#": "devicon-csharp-plain colored",
    cpp: "devicon-cplusplus-plain colored",
    "c++": "devicon-cplusplus-plain colored",
    c: "devicon-c-plain colored",
    go: "devicon-go-original-wordmark colored",
    golang: "devicon-go-original-wordmark colored",
    rust: "devicon-rust-plain colored",
    ruby: "devicon-ruby-plain colored",
    php: "devicon-php-plain colored",
    swift: "devicon-swift-plain colored",
    kotlin: "devicon-kotlin-plain colored",
    scala: "devicon-scala-plain colored",
    r: "devicon-r-plain colored",
    perl: "devicon-perl-plain colored",
    lua: "devicon-lua-plain colored",
    dart: "devicon-dart-plain colored",
    elixir: "devicon-elixir-plain colored",
    haskell: "devicon-haskell-plain colored",
    clojure: "devicon-clojure-plain colored",
    erlang: "devicon-erlang-plain colored",

    // Web Technologies
    html: "devicon-html5-plain colored",
    html5: "devicon-html5-plain colored",
    css: "devicon-css3-plain colored",
    css3: "devicon-css3-plain colored",
    sass: "devicon-sass-original colored",
    scss: "devicon-sass-original colored",
    less: "devicon-less-plain-wordmark colored",

    // JavaScript Frameworks & Libraries
    react: "devicon-react-original colored",
    reactjs: "devicon-react-original colored",
    vue: "devicon-vuejs-plain colored",
    vuejs: "devicon-vuejs-plain colored",
    angular: "devicon-angular-plain colored",
    angularjs: "devicon-angularjs-plain colored",
    svelte: "devicon-svelte-plain colored",
    nextjs: "devicon-nextjs-original colored",
    "next.js": "devicon-nextjs-original colored",
    nuxt: "devicon-nuxtjs-plain colored",
    "nuxt.js": "devicon-nuxtjs-plain colored",
    gatsby: "devicon-gatsby-plain colored",
    ember: "devicon-ember-original-wordmark colored",
    backbone: "devicon-backbonejs-plain colored",
    jquery: "devicon-jquery-plain colored",

    // Node.js & Backend
    nodejs: "devicon-nodejs-plain colored",
    "node.js": "devicon-nodejs-plain colored",
    node: "devicon-nodejs-plain colored",
    express: "devicon-express-original colored",
    expressjs: "devicon-express-original colored",
    nestjs: "devicon-nestjs-original colored",
    fastify: "devicon-fastify-plain colored",

    // Python Frameworks
    django: "devicon-django-plain colored",
    flask: "devicon-flask-original colored",
    fastapi: "devicon-fastapi-plain colored",

    // Databases
    mysql: "devicon-mysql-plain colored",
    postgresql: "devicon-postgresql-plain colored",
    postgres: "devicon-postgresql-plain colored",
    mongodb: "devicon-mongodb-plain colored",
    mongo: "devicon-mongodb-plain colored",
    redis: "devicon-redis-plain colored",
    sqlite: "devicon-sqlite-plain colored",
    mariadb: "devicon-mariadb-plain colored",
    oracle: "devicon-oracle-plain colored",
    cassandra: "devicon-cassandra-plain colored",
    couchdb: "devicon-couchdb-plain colored",
    neo4j: "devicon-neo4j-plain colored",

    // DevOps & Tools
    docker: "devicon-docker-plain colored",
    kubernetes: "devicon-kubernetes-plain colored",
    k8s: "devicon-kubernetes-plain colored",
    jenkins: "devicon-jenkins-plain colored",
    git: "devicon-git-plain colored",
    github: "devicon-github-original colored",
    gitlab: "devicon-gitlab-plain colored",
    bitbucket: "devicon-bitbucket-plain colored",
    terraform: "devicon-terraform-plain colored",
    ansible: "devicon-ansible-plain colored",
    vagrant: "devicon-vagrant-plain colored",
    nginx: "devicon-nginx-original colored",
    apache: "devicon-apache-plain colored",

    // Cloud Platforms
    aws: "devicon-amazonwebservices-plain-wordmark colored",
    amazon: "devicon-amazonwebservices-plain-wordmark colored",
    azure: "devicon-azure-plain colored",
    gcp: "devicon-googlecloud-plain colored",
    google: "devicon-googlecloud-plain colored",
    heroku: "devicon-heroku-plain colored",
    digitalocean: "devicon-digitalocean-plain colored",

    // Testing
    jest: "devicon-jest-plain colored",
    mocha: "devicon-mocha-plain colored",
    pytest: "devicon-pytest-plain colored",
    selenium: "devicon-selenium-original colored",
    cypress: "devicon-cypress-plain colored",

    // Build Tools & Package Managers
    webpack: "devicon-webpack-plain colored",
    vite: "devicon-vitejs-plain colored",
    vitejs: "devicon-vitejs-plain colored",
    npm: "devicon-npm-original-wordmark colored",
    yarn: "devicon-yarn-plain colored",
    pnpm: "devicon-pnpm-plain colored",
    gradle: "devicon-gradle-plain colored",
    maven: "devicon-maven-plain colored",
    gulp: "devicon-gulp-plain colored",
    grunt: "devicon-grunt-plain colored",

    // Mobile
    android: "devicon-android-plain colored",
    ios: "devicon-apple-original colored",
    apple: "devicon-apple-original colored",
    flutter: "devicon-flutter-plain colored",
    "react native": "devicon-react-original colored",
    reactnative: "devicon-react-original colored",

    // CMS & Frameworks
    wordpress: "devicon-wordpress-plain colored",
    drupal: "devicon-drupal-plain colored",
    joomla: "devicon-joomla-plain colored",
    magento: "devicon-magento-plain colored",

    // Other
    graphql: "devicon-graphql-plain colored",
    redux: "devicon-redux-original colored",
    tailwind: "devicon-tailwindcss-plain colored",
    tailwindcss: "devicon-tailwindcss-plain colored",
    bootstrap: "devicon-bootstrap-plain colored",
    materialui: "devicon-materialui-plain colored",
    "material-ui": "devicon-materialui-plain colored",
    figma: "devicon-figma-plain colored",
    sketch: "devicon-sketch-plain colored",
    vscode: "devicon-vscode-plain colored",
    vim: "devicon-vim-plain colored",
    linux: "devicon-linux-plain colored",
    ubuntu: "devicon-ubuntu-plain colored",
    debian: "devicon-debian-plain colored",
    fedora: "devicon-fedora-plain colored",
    centos: "devicon-centos-plain colored",
    windows: "devicon-windows8-original colored",
    bash: "devicon-bash-plain colored",
    shell: "devicon-bash-plain colored",
    powershell: "devicon-powershell-plain colored",
    markdown: "devicon-markdown-plain colored",
    latex: "devicon-latex-plain colored",
    firebase: "devicon-firebase-plain colored",
    supabase: "devicon-supabase-plain colored",
    prisma: "devicon-prisma-original colored",
    astro: "devicon-astro-plain colored",
};

/**
 * Get the Devicon class for a given technology/language
 * Falls back to a generic code icon if not found
 */
export function getTechIconClass(tech: string): string {
    const normalized = tech.toLowerCase().trim();
    return TECH_ICON_MAP[normalized] || "devicon-code-plain";
}

/**
 * Get Devicon classes for multiple technologies
 * Returns up to maxCount icons
 */
export function getTechIconClasses(
    technologies: string | string[],
    maxCount = 3
): string[] {
    const techArray = Array.isArray(technologies) ? technologies : [technologies];
    return techArray.slice(0, maxCount).map(getTechIconClass);
}

/**
 * Check if a technology has an icon available
 */
export function hasTechIcon(tech: string): boolean {
    const normalized = tech.toLowerCase().trim();
    return normalized in TECH_ICON_MAP;
}
